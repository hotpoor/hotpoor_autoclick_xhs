// Generated by CoffeeScript 2.6.1
(function() {
  var Hs, root;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  // !!!! Hotpoor root object
  root.Hs || (root.Hs = {});

  Hs = root.Hs;

  $(function() {
    console.log("article coffee");
    $("body").on("click", ".get_info", function(evt) {
      var dom;
      dom = $(this);
      dom.text("解析中");
      return $.ajax({
        url: "/api/tool/article/get_info",
        type: "GET",
        dataType: "json",
        data: {
          short_link: $("input[data-name=short_link]").val()
        },
        success: function(data) {
          var content, i, j, len, ref, result, results, time_now, title;
          dom.text("查询");
          if (data.info === "ok") {
            result = data.result;
            title = result["title"].replaceAll("puco", "口红博主").replaceAll("唇泥", "唇釉");
            content = result["content"].replaceAll("puco", "口红博主").replaceAll("唇泥", "唇釉");
            $("input[data-name=json_file]").val(result["t"]);
            $("input[data-name=article_title]").val(title);
            $("textarea[data-name=article_content]").val(content);
            $("input[data-name=poster_name]").val(result['poster_name']);
            $(".jimg").attr("src", result["icon"]);
            $(".line_images").empty();
            $("input[data-name=poster_id]").val(result['poster_id']);
            $("input[data-name=item_id]").val(result['item_id']);
            time_now = (new Date()).getTime();
            ref = result["image_links"];
            results = [];
            for (j = 0, len = ref.length; j < len; j++) {
              i = ref[j];
              results.push($(".line_images").append(`<div><img class="line_images_div_img" src="${i}"></div>`));
            }
            return results;
          }
        },
        error: function(data) {
          return dom.text("解析失败");
        }
      });
    });
    $("body").on("click", ".get_json", function(evt) {
      var dom;
      dom = $(this);
      dom.text("解析中");
      return $.ajax({
        url: "/api/tool/article/get_json",
        type: "GET",
        dataType: "json",
        data: {
          t: $("input[data-name=json_file]").val()
        },
        success: function(data) {
          var content, i, j, len, ref, result, results, time_now, title;
          dom.text("查询");
          if (data.info === "ok") {
            result = data.result;
            title = result["title"].replaceAll("puco", "口红博主").replaceAll("唇泥", "唇釉");
            content = result["content"].replaceAll("puco", "口红博主").replaceAll("唇泥", "唇釉");
            $("input[data-name=article_title]").val(title);
            $("textarea[data-name=article_content]").val(content);
            $(".line_images").empty();
            time_now = (new Date()).getTime();
            ref = result["image_links"];
            results = [];
            for (j = 0, len = ref.length; j < len; j++) {
              i = ref[j];
              results.push($(".line_images").append(`<div><img class="line_images_div_img" src="${i}"></div>`));
            }
            return results;
          }
        },
        error: function(data) {
          return dom.text("解析失败");
        }
      });
    });
    $("body").on("click", ".CleanCache", function(evt) {
      var dom;
      dom = $(this);
      return $.ajax({
        url: "/api/tool/article/CleanCache",
        type: "GET",
        dataType: "Json",
        data: {
          t: (new Date()).getTime(),
          success: function(data) {
            return console.log(data);
          },
          error: function(data) {
            return console.log(data);
          }
        }
      });
    });
    return $("body").on("click", ".MakeVideo", function(evt) {
      var dom;
      dom = $(this);
      return $.ajax({
        url: "/api/tool/article/MakeVideo",
        type: "GET",
        dataType: "Json",
        data: {
          t: (new Date()).getTime(),
          success: function(data) {
            return console.log(data);
          },
          error: function(data) {
            return console.log(data);
          }
        }
      });
    });
  });

}).call(this);
